<%- include('partials/head') %>
</head>
<body class="bg-gray-50 min-h-screen font-sans">
  <%- include('partials/nav') %>
  <div class="max-w-7xl mx-auto p-4 mt-4">
    <h1 class="text-3xl font-bold text-blue-700 mb-4 text-center">🎓 Student Attendance</h1>
    <!-- Mark Attendance Form -->
    <form action="/attendance" method="POST" class="bg-white p-6 rounded shadow">
      <div class="grid md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium">📅 Date</label>
          <input type="date" name="date" class="mt-1 block w-full border p-2 rounded" required>
        </div>
        <div>
          <label class="block text-sm font-medium">🏫 Total Classes</label>
          <input type="number" name="totalClasses" class="mt-1 block w-full border p-2 rounded" min="1" required>
        </div>
        <div>
          <label class="block text-sm font-medium">👥 Attended</label>
          <input type="number" name="attendedClasses" class="mt-1 block w-full border p-2 rounded" min="0" required>
        </div>
      </div>
      <div class="mt-4">
        <label class="block text-sm font-medium">📌 Status</label>
        <select name="status" class="mt-1 block w-full border p-2 rounded">
          <option value="Present">Present</option>
          <option value="Absent">Absent</option>
        </select>
      </div>
      <button class="mt-4 bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-800">📋 Submit Attendance</button>
    </form>

    <!-- Attendance Records -->
    <div class="mt-10">
      <h2 class="text-xl font-semibold mb-4">📊 Attendance Records</h2>

      <% if (records.length === 0) { %>
        <div class="text-center text-gray-500">No attendance records yet.</div>
      <% } else { %>
        <div>
          <% records.forEach(record => { %>
            <div class="bg-gray-100 p-4 mb-2 rounded flex flex-col md:flex-row justify-between items-start md:items-center">
              <div class="mb-2 md:mb-0">
                <div class="font-semibold"><%= record.date %> - <%= record.status %></div>
                <div class="text-sm text-gray-700">Classes: <%= record.attendedClasses %>/<%= record.totalClasses %> | <%= record.percentage %>%</div>
              </div>
              <div class="flex gap-2">
                <form action="/attendance/<%= record.id %>/edit" method="GET">
                  <button class="text-blue-600 hover:underline">✏️ Edit</button>
                </form>
                <form action="/attendance/<%= record.id %>?_method=DELETE" method="POST">
                  <button class="text-red-600 hover:underline">🗑️ Delete</button>
                </form>
              </div>
            </div>
          <% }) %>
        </div>
      <% } %>
    </div>
  </div>

</body>
</html>
